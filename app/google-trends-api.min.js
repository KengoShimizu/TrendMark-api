!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("https"),require("querystring")):"function"==typeof define&&define.amd?define("google-trends-api",["https","querystring"],e):"object"==typeof exports?exports["google-trends-api"]=e(require("https"),require("querystring")):t["google-trends-api"]=e(t.https,t.querystring)}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),o=n(i),s=r(2),a=n(s),u=r(5),c={processor:u.getInterestResults,objectConstructor:u.constructInterestObj},f={processor:u.getTrendingResults,objectConstructor:u.constructTrendingObj},d=o["default"].bind(void 0,a["default"]);e["default"]={autoComplete:d("Auto complete",c),dailyTrends:d("Daily trends",f),interestByRegion:d("Interest by region",c),interestOverTime:d("Interest over time",c),realTimeTrends:d("Real time trends",f),relatedQueries:d("Related queries",c),relatedTopics:d("Related topics",c)},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,r){var n=r.processor,i=r.objectConstructor,o=n(t);return function(t,r){var n=i(t,r),s=n.cbFunc,a=n.obj;return a instanceof Error?Promise.reject(s(a)):o(e,a).then(function(t){return s(null,t)})["catch"](function(t){return Promise.reject(s(t))})}},t.exports=e["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var r=void 0;r=a["default"].request(t,function(t){var r="";t.on("data",function(t){r+=t}),t.on("end",function(){e(null,r.toString("utf8"))})}),r.on("error",function(t){e(t)}),r.end()}function o(t){var e=t.method,r=t.host,n=t.path,o=t.qs,s=t.agent,u={host:r,method:e,path:n+"?"+c["default"].stringify(o)};return s&&(u.agent=s),f&&(u.headers={cookie:f}),new Promise(function(t,e){var r=a["default"].request(u,function(r){var n="";r.on("data",function(t){n+=t}),r.on("end",function(){429===r.statusCode&&r.headers["set-cookie"]?(f=r.headers["set-cookie"][0].split(";")[0],u.headers={cookie:f},i(u,function(r,n){return r?e(r):void t(n)})):t(n.toString("utf8"))})});r.on("error",function(t){e(t)}),r.end()})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var s=r(3),a=n(s),u=r(4),c=n(u),f=void 0;t.exports=e["default"]},function(t,e){t.exports=require("https")},function(t,e){t.exports=require("querystring")},function(t,e,r){"use strict";function n(t,e){return Math.abs(e-t)/864e5<7}function i(t,e,r){var n=(t.getUTCMonth()+1).toString(),i=t.getUTCDate().toString(),o=r?"":"-";n=n.length<2?"0"+n:n,i=r&&i.length<2?"0"+i:i;var s=t.getUTCFullYear().toString(),a=t.getUTCHours(),u=t.getUTCMinutes();return e?""+s+o+n+o+i+"T"+a+"\\:"+u+"\\:00":""+s+o+n+o+i}function o(t){if(t.startTime&&t.endTime&&t.startTime>t.endTime){var e=t.startTime;t.startTime=t.endTime,t.endTime=e}t.endTime||(t.endTime=new Date),t.startTime||(t.startTime=new Date("2004-01-01"));var r=n(t.startTime,t.endTime),o=i(t.startTime,r&&t.granularTimeResolution),s=i(t.endTime,r&&t.granularTimeResolution);return t.time=o+" "+s,t}function s(t){var e=Array.isArray(t.geo)&&Array.isArray(t.keyword);return e&&t.geo.length!==t.keyword.length?new Error("Geo length must be equal to keyword length"):t}function a(t){return!t.startTime||t.startTime instanceof Date||(t=new Error("startTime must be a Date object")),!t.endTime||t.endTime instanceof Date||(t=new Error("endTime must be a Date object")),t}function u(t,e){return t?t&&"object"!==("undefined"==typeof t?"undefined":g(t))||Array.isArray(t)?t=new Error("Must supply an object"):t.keyword||(t=new Error("Must have a keyword field")):t=new Error("Must supply an object"),$(e)&&(t=new Error("Callback function must be a function")),t=s(t),t=a(t)}function c(t,e){"function"==typeof t&&(e=t),t=u(t,e),t.hl||(t.hl="en-US"),t.category||(t.category=0),t.timezone||(t.timezone=(new Date).getTimezoneOffset());var r=["images","news","youtube","froogle",""];return r.indexOf(t.property)===-1&&(t.property=""),e||(e=function(t,e){return t?t:e}),t=o(t),{cbFunc:e,obj:t}}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=["COUNTRY","REGION","CITY","DMA"],r=e.some(function(e){return e===t.toUpperCase()});return r?t.toUpperCase():""}function d(t){try{return JSON.parse(t.slice(4)).widgets}catch(e){throw e.requestBody=t,e}}function l(t){var e=t.geo&&Array.isArray(t.geo),r=Array.isArray(t.keyword);if(e&&!r&&(t.keyword=Array(t.geo.length).fill(t.keyword),r=!0),r){var n=t.keyword.reduce(function(e,r){return e.push(y({},t,{keyword:r})),e},[]);return e&&t.geo.forEach(function(t,e){n[e].geo=t}),n}return[t]}function h(t){return function(e,r){var n={"Auto complete":{path:"/trends/api/autocomplete/"+encodeURIComponent(r.keyword)},"Interest over time":{path:"/trends/api/widgetdata/multiline",_id:"TIMESERIES"},"Interest by region":{path:"/trends/api/widgetdata/comparedgeo",resolution:f(r.resolution),_id:"GEO_MAP"},"Related topics":{path:"/trends/api/widgetdata/relatedsearches",_id:"RELATED_TOPICS"},"Related queries":{path:"/trends/api/widgetdata/relatedsearches",_id:"RELATED_QUERIES"}},i={method:"GET",host:"trends.google.com",path:"/trends/api/explore",qs:{hl:r.hl,req:JSON.stringify({comparisonItem:l(r),category:r.category,property:r.property}),tz:r.timezone}};r.agent&&(i.agent=r.agent);var o=n[e],s=o.path,a=o.resolution,u=o._id;return t(i).then(function(n){var i=d(n),o=i.find(function(t){var r=t.id,n=void 0===r?"":r,i=t.request;return n.indexOf(u)>-1||"Auto complete"===e&&i});if(!o){var c={message:"Available widgets does not contain selected api type",requestBody:n};throw c}var f=o.request,l=o.token;a&&(f.resolution=a),f.requestOptions.category=r.category,f.requestOptions.property=r.property,f=JSON.stringify(f);var h={path:s,method:"GET",host:"trends.google.com",qs:{hl:r.hl,req:f,token:l,tz:r.timezone}};return r.agent&&(h.agent=r.agent),t(h)}).then(function(t){try{var e=0,r=JSON.parse(t.slice(5))["default"].timelineData,n=r.map(function(t,r){return e+=1,7===e&&(e=0),0===r&&(e=v.unix(Number(t.time)).day()),{time:Number(t.time),day:e,date:t.formattedAxisTime,value:t.value[0]}});return JSON.stringify(n)}catch(i){return t}})}}function p(t){return function(e,r){var n={"Daily trends":{path:"/trends/api/dailytrends",extraParams:{ed:i(r.trendDate,!1,!0),ns:r.ns}},"Real time trends":{path:"/trends/api/realtimetrends",extraParams:{fi:0,fs:0,ri:300,rs:20,sort:0}}},o={method:"GET",host:"trends.google.com",path:n[e].path,qs:{hl:r.hl,tz:r.timezone,geo:r.geo,cat:r.category}};return r.agent&&(o.agent=r.agent),o.qs=y({},o.qs,n[e].extraParams),t(o).then(function(t){try{return JSON.stringify(JSON.parse(t.slice(5)))}catch(e){return t}})}}function m(t,e){if("function"==typeof t&&(e=t),!t||t&&"object"!==("undefined"==typeof t?"undefined":g(t))||Array.isArray(t))t=new Error("Must supply an object");else{t.trendDate&&t.trendDate instanceof Date||delete t.trendDate;var r=new Date,n={hl:"en-US",category:"all",timezone:r.getTimezoneOffset(),trendDate:r,ns:15};t=y({},n,t)}return $(e)&&(t=new Error("Callback function must be a function")),t.geo||(t=new Error("Must supply an geographical location (geo)")),e||(e=function(t,e){return t?t:e}),{cbFunc:e,obj:t}}Object.defineProperty(e,"__esModule",{value:!0});var y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isLessThan7Days=n,e.convertDateToString=i,e.formatTime=o,e.constructInterestObj=c,e.formatResolution=f,e.parseResults=d,e.formatComparisonItems=l,e.getInterestResults=h,e.getTrendingResults=p,e.constructTrendingObj=m;var v=r(6),$=function(t){return!!t&&"function"!=typeof t}},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){"use strict";var t="millisecond",e="second",r="minute",n="hour",i="day",o="week",s="month",a="quarter",u="year",c="date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},p={s:h,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),i=r%60;return(e<=0?"+":"-")+h(n,2,"0")+":"+h(i,2,"0")},m:function D(t,e){if(t.date()<e.date())return-D(e,t);var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,s),i=e-n<0,o=t.clone().add(r+(i?-1:1),s);return+(-(r+(e-n)/(i?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(f){return{M:s,y:u,w:o,d:i,D:c,h:n,m:r,s:e,ms:t,Q:a}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",y={};y[m]=l;var g=function(t){return t instanceof b},v=function(t,e,r){var n;if(!t)return m;if("string"==typeof t)y[t]&&(n=t),e&&(y[t]=e,n=t);else{var i=t.name;y[i]=t,n=i}return!r&&n&&(m=n),n||!r&&m},$=function(t,e){if(g(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new b(r)},T=p;T.l=v,T.i=g,T.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function l(t){this.$L=v(t.locale,null,!0),this.parse(t)}var h=l.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(T.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(f);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return T},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(t,e){var r=$(t);return this.startOf(e)<=r&&r<=this.endOf(e)},h.isAfter=function(t,e){return $(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<$(t)},h.$g=function(t,e,r){return T.u(t)?this[e]:this.set(r,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,a){var f=this,d=!!T.u(a)||a,l=T.p(t),h=function(t,e){var r=T.w(f.$u?Date.UTC(f.$y,e,t):new Date(f.$y,e,t),f);return d?r:r.endOf(i)},p=function(t,e){return T.w(f.toDate()[t].apply(f.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),f)},m=this.$W,y=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case u:return d?h(1,0):h(31,11);case s:return d?h(1,y):h(0,y+1);case o:var $=this.$locale().weekStart||0,b=(m<$?m+7:m)-$;return h(d?g-b:g+(6-b),y);case i:case c:return p(v+"Hours",0);case n:return p(v+"Minutes",1);case r:return p(v+"Seconds",2);case e:return p(v+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(o,a){var f,d=T.p(o),l="set"+(this.$u?"UTC":""),h=(f={},f[i]=l+"Date",f[c]=l+"Date",f[s]=l+"Month",f[u]=l+"FullYear",f[n]=l+"Hours",f[r]=l+"Minutes",f[e]=l+"Seconds",f[t]=l+"Milliseconds",f)[d],p=d===i?this.$D+(a-this.$W):a;if(d===s||d===u){var m=this.clone().set(c,1);m.$d[h](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[T.p(t)]()},h.add=function(t,a){var c,f=this;t=Number(t);var d=T.p(a),l=function(e){var r=$(f);return T.w(r.date(r.date()+Math.round(e*t)),f)};if(d===s)return this.set(s,this.$M+t);if(d===u)return this.set(u,this.$y+t);if(d===i)return l(1);if(d===o)return l(7);var h=(c={},c[r]=6e4,c[n]=36e5,c[e]=1e3,c)[d]||1,p=this.$d.getTime()+t*h;return T.w(p,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var r=t||"YYYY-MM-DDTHH:mm:ssZ",n=T.z(this),i=this.$locale(),o=this.$H,s=this.$m,a=this.$M,u=i.weekdays,c=i.months,f=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].substr(0,o)},l=function(t){return T.s(o%12||12,t,"0")},h=i.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:T.s(a+1,2,"0"),MMM:f(i.monthsShort,a,c,3),MMMM:f(c,a),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:f(i.weekdaysMin,this.$W,u,2),ddd:f(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:T.s(o,2,"0"),h:l(1),hh:l(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:T.s(s,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:n};return r.replace(d,function(t,e){return e||p[t]||n.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(t,c,f){var d,l=T.p(c),h=$(t),p=6e4*(h.utcOffset()-this.utcOffset()),m=this-h,y=T.m(this,h);return y=(d={},d[u]=y/12,d[s]=y,d[a]=y/3,d[o]=(m-p)/6048e5,d[i]=(m-p)/864e5,d[n]=m/36e5,d[r]=m/6e4,d[e]=m/1e3,d)[l]||m,f?y:T.a(y)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return y[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=v(t,e,!0);return n&&(r.$L=n),r},h.clone=function(){return T.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},l}(),w=b.prototype;return $.prototype=w,[["$ms",t],["$s",e],["$m",r],["$H",n],["$W",i],["$M",s],["$y",u],["$D",c]].forEach(function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),$.extend=function(t,e){return t.$i||(t(e,b,$),t.$i=!0),$},$.locale=v,$.isDayjs=g,$.unix=function(t){return $(1e3*t)},$.en=y[m],$.Ls=y,$.p={},$})}])});
//# sourceMappingURL=google-trends-api.min.js.map